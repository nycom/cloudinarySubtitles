{"version":3,"file":"cloudinary-subtitle-lib.js.map","sources":["ng://cloudinary-subtitle-lib/lib/cloudinary-subtitle-lib.service.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class CloudinarySubtitleLibService {\n\n  BASE_URL = 'https://res.cloudinary.com/';\n  CLOUDINARY_URL_VIDEO_TYPE_EXTENSION = '/video/upload/';\n\n  constructor() {}\n\n  public addSubtitlesToVideo(cloudName: string, videoPublicId: string, subtitles: any) {\n\n    if(!cloudName || cloudName.length === 0){\n      console.error(`Missing or empty appropriate cloudName...\n                     cloudName should be a string which represents your cloud name provided by cloudinary,\\n\n                     please follow the instructions and try again`);\n      return;\n    }\n\n    if(!videoPublicId || videoPublicId.length === 0){\n      console.error(`Missing appropriate videoPublicId...\\n\n                     videoPublicId should be a string which represents the video id provided by cloudinary,\\n \n                     please follow the instructions and try again`);\n\n      return;\n    }\n\n    if(!subtitles || !subtitles.subtitles || subtitles.subtitles.length === 0){\n      console.error(`Missing or bad appropriate subtitles JSON...\\n\n                     the appropriate subtitles JSON should be of type:\\n\n                     { subtitles: { 'start-timing': string, 'end-timing': string, text: string }[] }\\n\n                     please follow the instructions and try again`);\n      return;\n    }\n\n    let url = this.BASE_URL + cloudName + this.CLOUDINARY_URL_VIDEO_TYPE_EXTENSION;\n    const subtitlesArray = subtitles.subtitles;\n\n    subtitlesArray.map(entry => {\n      url += this.entryToCloudinaryParams(entry);\n    });\n\n    url += videoPublicId;\n    return url;\n  }\n\n  private entryToCloudinaryParams(entry): string {\n    return (this.addTextAndPosition(entry.text) +\n      this.parseTimeToParam('so_', entry['start-timing']) + ',' +\n      this.parseTimeToParam('eo_', entry['end-timing']) + '/');\n  }\n\n  private addTextAndPosition(text): string {\n    return 'l_text:Arial_40px:' + encodeURIComponent(encodeURIComponent(text)) + ',y_60,g_south,b_black,co_white,';\n  }\n\n  private parseTimeToParam(prefix, time): string {\n    let timeArray = time.split(':'),\n      sec = 0, min = 1;\n\n    while (timeArray.length > 0) {\n      sec += min * parseFloat(timeArray.pop());\n      min *= 60;\n    }\n    return prefix + sec;\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;IAWE;wBAHW,6BAA6B;mDACF,gBAAgB;KAEtC;;;;;;;IAET,0DAAmB;;;;;;cAAC,SAAiB,EAAE,aAAqB,EAAE,SAAc;;QAEjF,IAAG,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAC;YACtC,OAAO,CAAC,KAAK,CAAC,4NAE8C,CAAC,CAAC;YAC9D,OAAO;SACR;QAED,IAAG,CAAC,aAAa,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC,EAAC;YAC9C,OAAO,CAAC,KAAK,CAAC,2NAE8C,CAAC,CAAC;YAE9D,OAAO;SACR;QAED,IAAG,CAAC,SAAS,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,SAAS,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,EAAC;YACxE,OAAO,CAAC,KAAK,CAAC,qSAG8C,CAAC,CAAC;YAC9D,OAAO;SACR;;QAED,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,GAAG,SAAS,GAAG,IAAI,CAAC,mCAAmC,CAAC;;QAC/E,IAAM,cAAc,GAAG,SAAS,CAAC,SAAS,CAAC;QAE3C,cAAc,CAAC,GAAG,CAAC,UAAA,KAAK;YACtB,GAAG,IAAI,KAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;SAC5C,CAAC,CAAC;QAEH,GAAG,IAAI,aAAa,CAAC;QACrB,OAAO,GAAG,CAAC;;;;;;IAGL,8DAAuB;;;;cAAC,KAAK;QACnC,QAAQ,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC;YACzC,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,KAAK,CAAC,cAAc,CAAC,CAAC,GAAG,GAAG;YACzD,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC,GAAG,GAAG,EAAE;;;;;;IAGrD,yDAAkB;;;;cAAC,IAAI;QAC7B,OAAO,oBAAoB,GAAG,kBAAkB,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,GAAG,iCAAiC,CAAC;;;;;;;IAGzG,uDAAgB;;;;;cAAC,MAAM,EAAE,IAAI;;QACnC,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CACZ;;QADnB,IACE,GAAG,GAAG,CAAC,CAAU;;QADnB,IACW,GAAG,GAAG,CAAC,CAAC;QAEnB,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAC3B,GAAG,IAAI,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC;YACzC,GAAG,IAAI,EAAE,CAAC;SACX;QACD,OAAO,MAAM,GAAG,GAAG,CAAC;;;gBAjEvB,UAAU,SAAC;oBACV,UAAU,EAAE,MAAM;iBACnB;;;;;uCAJD;;;;;;;;;;;;;;;"}
